{% extends "layout.html" %}
{% load static %}
{% load humanize %}
{% load car_search %}
{% block title %}BSD AUTO : Location de voitures au Sénégal{% endblock %}
{% block content %}
<main class="content-wrapper">
      <!-- Hero with search form -->
      <section class="position-relative overflow-hidden" style="background: #fe9306;">
        <div class="container position-relative z-2 pb-2 py-sm-3 py-md-4 py-lg-5 my-lg-3 my-xl-4 my-xxl-5"
        style="background: #fe9306;"
        >
          <div class="row align-items-center pt-lg-2 pb-lg-3 pb-xl-4 pb-xxl-5">
            <h1 class="display-4 fw-bold text-white text-uppercase text-center">
                Location de voitures au Sénégal
              </h1>
            <!-- Heading -->

            <!-- Search form -->
            <div class="col-lg-12">
              <div class="bg-white rounded p-4 mb-4 me-lg-4 me-xxl-0" style="width:100%; --fn-bg-opacity: 0.08">
                {% url 'cars_list' as cars_list_url %}
                {% car_search_box action_url=cars_list_url submit_label="Rechercher" %}
              </div>
              <div class="text-white">
                <p class="fw-bold text-center text-md-start mb-0 text-white">
                  Large choix de véhicules à louer au Sénégal, prix abordables !
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Background image -->
      </section>

      <!-- Top offers -->
      <section class="container pt-2 pt-sm-3 pt-md-4 pt-lg-5 pb-5 my-xxl-3">
  <div class="d-flex align-items-start justify-content-between gap-4 pb-3 mb-2 mb-sm-3">
    <h2 class="mb-0">Top offers</h2>
    <div class="nav">
      <a class="nav-link position-relative fs-base text-nowrap py-1 px-0" href="#">
        <span class="hover-effect-underline stretched-link me-1">Voir tout</span>
        <i class="fi-chevron-right fs-lg"></i>
      </a>
    </div>
  </div>

  {% if top_cars %}
  <div class="row">
    <!-- Grande carte gauche : 1ère annonce -->
    <div class="col-lg-5 mb-4 mb-lg-0">
      {% with car=top_cars.0 %}
      <article class="card h-100 hover-effect-scale overflow-hidden">
        <div class="row flex-lg-column h-100 g-0">
          <div class="col-sm-5 col-lg-12 position-relative bg-body-tertiary overflow-hidden">
            <div class="d-lg-none" style="min-height:220px"></div>
            <div class="d-none d-lg-block" style="min-height:260px"></div>

            <div class="d-flex flex-column gap-2 align-items-start position-absolute top-0 start-0 z-1 pt-1 pt-sm-0 ps-1 ps-sm-0 mt-2 mt-sm-3 ms-2 ms-sm-3">
              {% if car.is_featured %}<span class="badge text-bg-info d-inline-flex align-items-center">Featured</span>{% endif %}
              <span class="badge text-bg-warning">Used</span>
            </div>

            {% with cover=car.cover_photo %}
              {% if cover and cover.image %}
                <img src="{{ cover.image.url }}" class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 object-fit-cover" alt="{{ car.title }}">
              {% else %}
                <img src="{% static 'assets/img/placeholders/car-16x9.jpg' %}" class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 object-fit-cover" alt="{{ car.title }}">
              {% endif %}
            {% endwith %}
          </div>

          <div class="col-sm-7 col-lg-12 d-lg-flex flex-column flex-fill py-md-2">
            <div class="card-body pb-3 pb-md-4">
              <div class="d-flex align-items-center justify-content-between mb-2">
                <div class="fs-xs text-body-secondary me-3">{{ car.created_at|date:"d/m/Y" }}</div>
                <div class="d-flex gap-2 position-relative z-2">
                  <!-- tes boutons d’action si besoin -->
                </div>
              </div>

              <h3 class="h5 mb-2">
                <a class="hover-effect-underline stretched-link me-1" href="{{ car.get_absolute_url }}">{{ car.title }}</a>
                <span class="fs-sm fw-normal text-body-secondary">({{ car.year }})</span>
              </h3>

              <div class="h6 mb-0">{{ car.daily_price|intcomma }} F</div>
            </div>

            <div class="card-footer bg-transparent border-0 pt-0 pb-4">
              <div class="d-flex flex-wrap justify-content-between gap-3 border-top fs-sm text-nowrap pt-3 pt-md-4">
                <div class="d-flex align-items-center gap-2"><i class="fi-map-pin"></i> {{ car.place.city.name }}</div>
                <div class="d-flex align-items-center gap-2"><i class="fi-tachometer"></i> {{ car.mileage_km|intcomma }} km</div>
                <div class="d-flex align-items-center gap-2"><i class="fi-gas-pump"></i> {{ car.get_fuel_type_display }}</div>
                <div class="d-flex align-items-center gap-2"><i class="fi-gearbox"></i> {{ car.get_transmission_display }}</div>
              </div>
            </div>
          </div>
        </div>
      </article>
      {% endwith %}
    </div>

    <!-- Deux cartes à droite : 2e et 3e annonces -->
    <div class="col-lg-7 d-flex flex-column gap-4">
      {% for car in top_cars|slice:"1:" %}
      <article class="card hover-effect-scale overflow-hidden">
        <div class="row g-0">
          <div class="col-sm-5 position-relative bg-body-tertiary overflow-hidden" style="min-height:220px">
            <div class="d-flex flex-column gap-2 align-items-start position-absolute top-0 start-0 z-1 pt-1 pt-sm-0 ps-1 ps-sm-0 mt-2 mt-sm-3 ms-2 ms-sm-3">
              {% if car.is_featured %}<span class="badge text-bg-primary">Featured</span>{% endif %}
            </div>

            {% with cover=car.cover_photo %}
              {% if cover and cover.image %}
                <img src="{{ cover.image.url }}" class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 object-fit-cover" alt="{{ car.title }}">
              {% else %}
                <img src="{% static 'assets/img/placeholders/car-16x9.jpg' %}" class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 object-fit-cover" alt="{{ car.title }}">
              {% endif %}
            {% endwith %}
          </div>

          <div class="col-sm-7 py-md-2">
            <div class="card-body pb-3 pb-md-4">
              <div class="d-flex align-items-center justify-content-between mb-2">
                <div class="fs-xs text-body-secondary me-3">{{ car.created_at|date:"d/m/Y" }}</div>
                <div class="d-flex gap-2 position-relative z-2"></div>
              </div>

              <h3 class="h5 mb-2">
                <a class="hover-effect-underline stretched-link me-1" href="{{ car.get_absolute_url }}">{{ car.title }}</a>
                <span class="fs-sm fw-normal text-body-secondary">({{ car.year }})</span>
              </h3>

              <div class="h6 mb-0">{{ car.daily_price|intcomma }} F</div>
            </div>

            <div class="card-footer bg-transparent border-0 pt-0 pb-4">
              <div class="d-flex flex-wrap justify-content-between gap-3 border-top fs-sm text-nowrap pt-3 pt-md-4">
                <div class="d-flex align-items-center gap-2"><i class="fi-map-pin"></i> {{ car.place.city.name }}</div>
                <div class="d-flex align-items-center gap-2"><i class="fi-tachometer"></i> {{ car.mileage_km|intcomma }} km</div>
                <div class="d-flex align-items-center gap-2"><i class="fi-gas-pump"></i> {{ car.get_fuel_type_display }}</div>
                <div class="d-flex align-items-center gap-2"><i class="fi-gearbox"></i> {{ car.get_transmission_display }}</div>
              </div>
            </div>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
  </div>
  {% else %}
    <p class="text-body-secondary">Aucune annonce pour le moment.</p>
  {% endif %}
</section>

      <!-- Latest listings -->
      <section class="container pt-2 pt-sm-3 pt-md-4 pt-lg-5 pb-5 my-xxl-3">
        <div class="d-sm-flex justify-content-between gap-3 pb-3 mb-2 mb-sm-3">
          <h2 class="mb-sm-0">Latest cars</h2>
          <ul class="nav nav-pills flex-sm-nowrap gap-2 text-nowrap">
            <li class="nav-item me-1">
              <a class="nav-link active" aria-current="page" href="{% url 'cars_list' %}">All</a>
            </li>
            <li class="nav-item me-1">
              <a class="nav-link" href="#!">New cars</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#!">Used cars</a>
            </li>
          </ul>
        </div>

        <!-- Row of listings that turns into carousel on screens < 1200px wide (xl breakpoint) -->
        <div
          class="swiper"
          data-swiper='{
          "slidesPerView": 1,
          "spaceBetween": 24,
          "pagination": {
            "el": ".swiper-pagination",
            "clickable": true
          },
          "breakpoints": {
            "550": {
              "slidesPerView": 2
            },
            "850": {
              "slidesPerView": 3
            },
            "1200": {
              "slidesPerView": 4
            }
          }
        }'
        >
          <div class="swiper-wrapper">
            <!-- Listing -->
            {% for car in latest_cars %}
    <div class="swiper-slide h-auto">
      <article class="card h-100 hover-effect-scale">
        <div class="card-img-top position-relative overflow-hidden">
          <div
            class="d-flex flex-column gap-2 align-items-start position-absolute top-0 start-0 z-1 pt-1 pt-sm-0 ps-1 ps-sm-0 mt-2 mt-sm-3 ms-2 ms-sm-3"
          >
            {% if car.is_featured %}
              <span class="badge text-bg-info d-inline-flex align-items-center">
                Verified <i class="fi-shield ms-1"></i>
              </span>
            {% endif %}
            <span class="badge text-bg-primary">New</span>
          </div>
          <div
            class="ratio hover-effect-target bg-body-tertiary"
            style="--fn-aspect-ratio: calc(204 / 306 * 100%)"
          >
            <div class="ratio hover-effect-target bg-body-tertiary" style="--fn-aspect-ratio: calc(204 / 306 * 100%)">
    {% if car.cover_photo %}
        <img src="{{ car.cover_photo.image.url }}" alt="{{ car.title }}"
             style="width: 100%; height: 100%; object-fit: cover;">
    {% else %}
        <img src="{% static 'images/default_car.jpg' %}" alt="{{ car.title }}"
             style="width: 100%; height: 100%; object-fit: cover;">
    {% endif %}
</div>
          </div>
        </div>
        <div class="card-body pb-3">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <div class="fs-xs text-body-secondary me-3">
              {{ car.created_at|date:"d/m/Y" }}
            </div>
            <div class="d-flex gap-2 position-relative z-2">
              <form method="post" action="{% url 'favorite_toggle' car.slug %}" class="d-inline">
              {% csrf_token %}
              <button type="submit" class="btn btn-icon btn-sm btn-outline-secondary rounded-circle">
                {% if car.is_favorite %}
                  <i class="fi-heart-filled fs-sm"></i>
                {% else %}
                  <i class="fi-heart fs-sm"></i>
                {% endif %}
              </button>
            </form>
            </div>
          </div>
          <h3 class="h6 mb-2">
            <a class="hover-effect-underline stretched-link me-1" href="{{ car.get_absolute_url }}">
              {{ car.brand.name }} {{ car.model_name.name }}
            </a>
            <span class="fs-xs fw-normal text-body-secondary">
              ({{ car.year }})
            </span>
          </h3>
          <div class="h6 mb-0">{{ car.daily_price|floatformat:0 }} F</div>
        </div>
        <div class="card-footer bg-transparent border-0 pt-0 pb-4">
          <div class="border-top pt-3">
            <div class="row row-cols-2 g-2 fs-sm">
              <div class="col d-flex align-items-center gap-2">
                <i class="fi-map-pin"></i>
                {{ car.place.city.name }}
              </div>
              <div class="col d-flex align-items-center gap-2">
                <i class="fi-tachometer"></i>
                {{ car.mileage_km }} km
              </div>
              <div class="col d-flex align-items-center gap-2">
                <i class="fi-gas-pump"></i>
                {{ car.get_fuel_type_display }}
              </div>
              <div class="col d-flex align-items-center gap-2">
                <i class="fi-gearbox"></i>
                {{ car.get_transmission_display }}
              </div>
            </div>
          </div>
        </div>
      </article>
    </div>
  {% endfor %}


          </div>

          <!-- Pagination (Bullets) -->
          <div class="swiper-pagination position-static mt-3 mt-lg-4"></div>
        </div>
      </section>

      <!-- Platform features -->
      <section class="container pt-2 pt-sm-3 pt-md-4 pt-lg-5 pb-5 my-xxl-3">
        <h2 class="pb-2 pb-sm-3">Vos avantages de location de voiture au Sénégal</h2>

        <!-- Row of cards that turns into carousel on screens < 992px wide (lg breakpoint) -->
        <div
          class="swiper"
          data-swiper='{
          "slidesPerView": 1,
          "spaceBetween": 24,
          "pagination": {
            "el": ".swiper-pagination",
            "clickable": true
          },
          "breakpoints": {
            "460": {
              "slidesPerView": 2
            },
            "768": {
              "slidesPerView": 3
            },
            "992": {
              "slidesPerView": 4
            }
          }
        }'
        >
          <div class="swiper-wrapper">
            <!-- Card -->
            <div class="swiper-slide h-auto">
              <div class="card h-100 bg-info-subtle border-0 p-2">
                <div class="card-body">
                  <h3 class="h6 mb-2 mt-sm-3 mb-0">
                    <i class="fi-credit-card fs-4 text-info"></i> Prix plus attractifs
                  </h3>
                  <p>
                    Les tarifs sont souvent moins élevés que ceux des agences traditionnelles, car il n’y a pas de frais de structure importants à couvrir.
                  </p>
                </div>
              </div>
            </div>

            <!-- Card -->
            <div class="swiper-slide h-auto">
              <div class="card h-100 bg-info-subtle border-0 p-2">
                <div class="card-body">
                  <h3 class="h6 mb-2 mt-sm-3 mb-0"><i class="fi-car fs-4 text-info"></i> Large choix de véhicules</h3>
                  <p>
                    Les particuliers proposent une variété de modèles (citadines, SUV, utilitaires…), parfois introuvables en agence, et souvent bien entretenus.
                  </p>
                </div>
              </div>
            </div>

            <!-- Card -->
            <div class="swiper-slide h-auto">
              <div class="card h-100 bg-info-subtle border-0 p-2">
                <div class="card-body">

                  <h3 class="h6 mb-2 mt-sm-3 mb-0">
                    <i class="fi-map-pin fs-4 text-info"></i> Souplesse et proximité
                  </h3>
                  <p>
                    Possibilité de récupérer la voiture près de chez soi ou à un endroit convenu, avec des horaires plus flexibles que les agences classiques.
                  </p>
                </div>
              </div>
            </div>

            <!-- Card -->
            <div class="swiper-slide h-auto">
              <div class="card h-100 bg-info-subtle border-0 p-2">
                <div class="card-body">

                  <h3 class="h6 mb-2 mt-sm-3 mb-0"> <i class="fi-user-plus fs-4 text-info"></i> Relation humaine</h3>
                  <p>
                    Le contact direct avec le propriétaire permet d’obtenir des conseils personnalisés sur le véhicule et parfois sur la région à visiter.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Pagination (Bullets) -->
          <div class="swiper-pagination position-static mt-3"></div>
        </div>
      </section>

      <section class="container pt-2 pt-sm-3 pt-md-4 pt-lg-5 pb-5 my-xxl-3">
  <h3 class="h4">Comment fonctionne la location de voiture avec BDS AUTO au Sénégal ?</h3>
  <p class="pb-3">
    BDS AUTO simplifie vos déplacements au Sénégal avec un service de location de voiture pratique, flexible et accessible à tous.
    Que vous soyez à Dakar, à l’aéroport Blaise Diagne (AIBD) ou dans une autre région, louer une voiture n’a jamais été aussi simple.
  </p>

  <h4 class="h5 mt-4">Vérifiez votre profil</h4>
  <p>
    Pour votre première location, nous vous demandons simplement une copie de votre carte d’identité ou passeport ainsi que
    votre permis de conduire en cours de validité. Une fois vos documents validés, vous pouvez réserver immédiatement votre véhicule.
  </p>

  <h4 class="h5 mt-4">Choisissez un véhicule disponible</h4>
  <ul class="text-start">
    <li><strong>Citadines</strong> pour circuler facilement à Dakar</li>
    <li><strong>SUV et 4x4</strong> pour vos trajets vers les régions ou les zones rurales</li>
    <li><strong>Minibus et familiales</strong> pour vos voyages en groupe ou en famille</li>
  </ul>
  <p>
    Avec BDS AUTO, vous comparez facilement les modèles et les tarifs afin de choisir la voiture qui correspond à votre budget et à vos besoins.
  </p>

  <h4 class="h5 mt-4">Réservez votre véhicule</h4>
  <p>
    En quelques clics, sélectionnez le véhicule souhaité et la durée de votre location. Nos tarifs sont transparents et incluent l’assurance de base.
    Vous pouvez aussi demander des options supplémentaires (GPS, siège bébé, chauffeur privé, kilométrage illimité, etc.).
  </p>

  <h4 class="h5 mt-4">Restituez le véhicule</h4>
  <p>
    À la fin de la location, vous restituez le véhicule à l’endroit convenu (aéroport, hôtel, agence ou domicile), avec le même niveau de carburant.
    Notre équipe effectue un contrôle rapide et vous validez la fin de location en toute simplicité.
  </p>

  <h4 class="h5 mt-4">Pourquoi louer une voiture avec BDS AUTO ?</h4>
  <ul class="text-start">
    <li><strong>Des prix compétitifs</strong> : location à partir de 15 000 FCFA/jour (≈ 23€), jusqu’à 30 % moins cher que les agences traditionnelles.</li>
    <li><strong>Une assurance incluse</strong> : chaque location est couverte par une assurance de base.</li>
    <li><strong>Une large flotte disponible</strong> : citadine, SUV, minibus, utilitaire… selon vos besoins.</li>
    <li><strong>Un service flexible</strong> : avec ou sans chauffeur, réservation en ligne ou par téléphone.</li>
    <li><strong>Un accompagnement complet</strong> : assistance 24h/24 et 7j/7 en cas de panne ou d’imprévu.</li>
  </ul>
      </section>


    </main>
{% endblock %}
