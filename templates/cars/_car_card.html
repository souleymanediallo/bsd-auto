{% load static %}
{% load humanize %}

<a href="{{ car.get_absolute_url }}" class="text-decoration-none text-dark">
<article class="card h-100 hover-effect-scale bg-body-tertiary border-0">
              <div class="card-img-top position-relative overflow-hidden">
                <div class="d-flex flex-column gap-2 align-items-start position-absolute top-0 start-0 z-1 pt-1 pt-sm-0 ps-1 ps-sm-0 mt-2 mt-sm-3 ms-2 ms-sm-3">
                  {% if car.is_featured %}
                    <span class="badge text-bg-info d-inline-flex align-items-center">
                      À la une <i class="fi-shield ms-1"></i>
                    </span>
                  {% endif %}
                  <span class="badge text-bg-warning">Voiture vérifiée</span>
                </div>
                <div class="ratio hover-effect-target bg-body-secondary" style="--fn-aspect-ratio: calc(204 / 306 * 100%)">
                  {% with cover=car.cover_photo %}
                    {% if cover and cover.image %}
                      <img src="{{ cover.image.url }}" alt="{{ car.title }}" style="width:100%;height:100%;object-fit:cover;">
                    {% else %}
                      <img src="{% static 'assets/img/placeholders/car-16x9.jpg' %}" alt="{{ car.title }}" style="width:100%;height:100%;object-fit:cover;">
                    {% endif %}
                  {% endwith %}
                </div>
              </div>

              <div class="card-body pb-3">
                  <div class="row row-cols-2 g-2 fs-sm">
                    <div class="col d-flex align-items-center gap-2">
                        <p>{{ car.brand.name }} <span class="fs-xs fw-normal text-body-secondary">({{ car.year }})</span></p>
                    </div>
                    <div class="col d-flex align-items-center gap-2">
                      <h3 class="h6">{{ car.daily_price|intcomma }} F/jour</h3>
                    </div>
                  </div>
              </div>

              <div class="card-footer bg-transparent border-0 pt-0 pb-4">
                <div class="border-top pt-3">
                  <div class="row row-cols-2 g-2 fs-sm">
                    <div class="col d-flex align-items-center gap-2">
                      <i class="fi-map-pin"></i>
                      {{ car.place.city.name }}
                    </div>
                    <div class="col d-flex align-items-center gap-2">
                      <i class="fi-tachometer"></i>
                      {{ car.mileage_km|intcomma }} km
                    </div>
                    <div class="col d-flex align-items-center gap-2">
                      <i class="fi-gas-pump"></i>
                      {{ car.get_fuel_type_display }}
                    </div>
                    <div class="col d-flex align-items-center gap-2">
                      <i class="fi-gearbox"></i>
                      {{ car.get_transmission_display }}
                    </div>
                  </div>
                </div>
              </div>
            </article>
</a>